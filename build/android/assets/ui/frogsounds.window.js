var FrogSounds=require("model/frogsounds.adapter"),АктйонБар=require("com.alcoapps.actionbarextras");module.exports=function(e){var t=Ti.UI.createWindow({fullScreen:!0,title:"Froschstimmen"});return t.addEventListener("open",function(e){АктйонБар.setTitle("Tierstimmenarchiv.de"),АктйонБар.setSubtitle("Frösche/Unken/Kröten"),e.source.getActivity().actionBar.displayHomeAsUp=!0,t.flipViewContainer=require("de.manumaticx.androidflip").createFlipView({views:FrogSounds.getAllSpeciesNames().map(function(e){return require("ui/frogsounds.list")(e)})});var i=e.source.getActivity();i.actionBar.onHomeIconItemSelected=function(){e.source.close()},i.onCreateOptionsMenu=function(e){var t=FrogSounds.getAllSoundURLs(),i=new(require("vendor/sound2go.adapter"))(t);i.addEventListener("oncompleted",function(t){var i=t.cached?"offline":"online";e.menu.findItem(MODELCACHE).setIcon(Ti.App.Android.R.drawable["ic_action_"+i])}),i.addEventListener("onprogress",function(t){if(t&&t.progress){var i=Math.ceil(10*t.progress);e.menu.findItem(MODELCACHE).setIcon(Ti.App.Android.R.drawable["ic_action_online_"+i])}}),e.menu.add({title:"2Go",itemId:MODELCACHE,icon:i.areCached()?Ti.App.Android.R.drawable.ic_action_offline:Ti.App.Android.R.drawable.ic_action_online,showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS}).addEventListener("click",function(){i.toggleAllURLCache()}),console.log("Info: ACTIONBAR COMPLETED")},t.flipViewContainer.addEventListener("itemclick",function(e){var t=JSON.parse(e.itemId);Ti.UI.createNotification({message:Ti.Network.online?"Audiowiedergabe gestartet.":"Wiedergabe leider nicht möglich, da das "+Ti.Platform.model+" keine Verbindung ins Neuland hat. "}).show(),Ti.Network.online&&require("ui/player.window")(t).open()}),t.add(t.flipViewContainer),t.flipViewContainer.peakNext(!0)}),t};